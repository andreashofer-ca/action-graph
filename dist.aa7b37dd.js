(function(){function m(f){return f&&f.__esModule?f.default:f}function te(f){Object.defineProperty(f,"__esModule",{value:!0,configurable:!0})}function V(f,G,x,e){Object.defineProperty(f,G,{get:x,set:e,enumerable:!0,configurable:!0})}var ne=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{},P=ne.parcelRequire94c2,ae=P.register;ae("hXvNJ",function(f,G){te(f.exports),V(f.exports,"DiffEditor",function(){return Me}),V(f.exports,"useMonaco",function(){return Re}),V(f.exports,"Editor",function(){return K}),V(f.exports,"default",function(){return Le}),V(f.exports,"loader",function(){return P("cwHTZ").default});var x=P("cwHTZ"),e=P("bnwTv"),ce={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},I=ce,ue={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},ie=ue;function oe({children:r}){return m(e).createElement("div",{style:ie.container},r)}var de=oe,le=de;function fe({width:r,height:n,isEditorReady:c,loading:t,_ref:p,className:g,wrapperProps:b}){return m(e).createElement("section",{style:{...I.wrapper,width:r,height:n},...b},!c&&m(e).createElement(le,null,t),m(e).createElement("div",{ref:p,style:{...I.fullWidth,...!c&&I.hide},className:g}))}var se=fe,Q=(0,e.memo)(se);function $e(r){(0,e.useEffect)(r,[])}var U=$e;function pe(r,n,c=!0){let t=(0,e.useRef)(!0);(0,e.useEffect)(t.current||!c?()=>{t.current=!1}:r,n)}var h=pe;function S(){}function y(r,n,c,t){return ge(r,t)||ve(r,n,c,t)}function ge(r,n){return r.editor.getModel(Y(r,n))}function ve(r,n,c,t){return r.editor.createModel(n,c,t?Y(r,t):void 0)}function Y(r,n){return r.Uri.parse(n)}function he({original:r,modified:n,language:c,originalLanguage:t,modifiedLanguage:p,originalModelPath:g,modifiedModelPath:b,keepCurrentOriginalModel:R=!1,keepCurrentModifiedModel:Z=!1,theme:w="light",loading:D="Loading...",options:M={},height:j="100%",width:F="100%",className:q,wrapperProps:z={},beforeMount:J=S,onMount:W=S}){let[v,C]=(0,e.useState)(!1),[O,o]=(0,e.useState)(!0),d=(0,e.useRef)(null),i=(0,e.useRef)(null),k=(0,e.useRef)(null),s=(0,e.useRef)(W),a=(0,e.useRef)(J),L=(0,e.useRef)(!1);U(()=>{let u=x.default.init();return u.then(l=>(i.current=l)&&o(!1)).catch(l=>l?.type!=="cancelation"&&console.error("Monaco initialization: error:",l)),()=>d.current?T():u.cancel()}),h(()=>{if(d.current&&i.current){let u=d.current.getOriginalEditor(),l=y(i.current,r||"",t||c||"text",g||"");l!==u.getModel()&&u.setModel(l)}},[g],v),h(()=>{if(d.current&&i.current){let u=d.current.getModifiedEditor(),l=y(i.current,n||"",p||c||"text",b||"");l!==u.getModel()&&u.setModel(l)}},[b],v),h(()=>{let u=d.current.getModifiedEditor();u.getOption(i.current.editor.EditorOption.readOnly)?u.setValue(n||""):n!==u.getValue()&&(u.executeEdits("",[{range:u.getModel().getFullModelRange(),text:n||"",forceMoveMarkers:!0}]),u.pushUndoStop())},[n],v),h(()=>{d.current?.getModel()?.original.setValue(r||"")},[r],v),h(()=>{let{original:u,modified:l}=d.current.getModel();i.current.editor.setModelLanguage(u,t||c||"text"),i.current.editor.setModelLanguage(l,p||c||"text")},[c,t,p],v),h(()=>{i.current?.editor.setTheme(w)},[w],v),h(()=>{d.current?.updateOptions(M)},[M],v);let N=(0,e.useCallback)(()=>{if(!i.current)return;a.current(i.current);let u=y(i.current,r||"",t||c||"text",g||""),l=y(i.current,n||"",p||c||"text",b||"");d.current?.setModel({original:u,modified:l})},[c,n,p,r,t,g,b]),H=(0,e.useCallback)(()=>{!L.current&&k.current&&(d.current=i.current.editor.createDiffEditor(k.current,{automaticLayout:!0,...M}),N(),i.current?.editor.setTheme(w),C(!0),L.current=!0)},[M,w,N]);(0,e.useEffect)(()=>{v&&s.current(d.current,i.current)},[v]),(0,e.useEffect)(()=>{!O&&!v&&H()},[O,v,H]);function T(){let u=d.current?.getModel();R||u?.original?.dispose(),Z||u?.modified?.dispose(),d.current?.dispose()}return m(e).createElement(Q,{width:F,height:j,isEditorReady:v,loading:D,_ref:k,className:q,wrapperProps:z})}var be=he,Me=(0,e.memo)(be);function we(){let[r,n]=(0,e.useState)(x.default.__getMonacoInstance());return U(()=>{let c;return r||(c=x.default.init(),c.then(t=>{n(t)})),()=>c?.cancel()}),r}var Re=we;function Ee(r){let n=(0,e.useRef)();return(0,e.useEffect)(()=>{n.current=r},[r]),n.current}var me=Ee,_=new Map;function xe({defaultValue:r,defaultLanguage:n,defaultPath:c,value:t,language:p,path:g,theme:b="light",line:R,loading:Z="Loading...",options:w={},overrideServices:D={},saveViewState:M=!0,keepCurrentModel:j=!1,width:F="100%",height:q="100%",className:z,wrapperProps:J={},beforeMount:W=S,onMount:v=S,onChange:C,onValidate:O=S}){let[o,d]=(0,e.useState)(!1),[i,k]=(0,e.useState)(!0),s=(0,e.useRef)(null),a=(0,e.useRef)(null),L=(0,e.useRef)(null),N=(0,e.useRef)(v),H=(0,e.useRef)(W),T=(0,e.useRef)(),u=(0,e.useRef)(t),l=me(g),ee=(0,e.useRef)(!1),X=(0,e.useRef)(!1);U(()=>{let $=x.default.init();return $.then(E=>(s.current=E)&&k(!1)).catch(E=>E?.type!=="cancelation"&&console.error("Monaco initialization: error:",E)),()=>a.current?Ve():$.cancel()}),h(()=>{let $=y(s.current,r||t||"",n||p||"",g||c||"");$!==a.current?.getModel()&&(M&&_.set(l,a.current?.saveViewState()),a.current?.setModel($),M&&a.current?.restoreViewState(_.get(g)))},[g],o),h(()=>{a.current?.updateOptions(w)},[w],o),h(()=>{!a.current||t===void 0||(a.current.getOption(s.current.editor.EditorOption.readOnly)?a.current.setValue(t):t!==a.current.getValue()&&(X.current=!0,a.current.executeEdits("",[{range:a.current.getModel().getFullModelRange(),text:t,forceMoveMarkers:!0}]),a.current.pushUndoStop(),X.current=!1))},[t],o),h(()=>{let $=a.current?.getModel();$&&p&&s.current?.editor.setModelLanguage($,p)},[p],o),h(()=>{R!==void 0&&a.current?.revealLine(R)},[R],o),h(()=>{s.current?.editor.setTheme(b)},[b],o);let re=(0,e.useCallback)(()=>{if(!(!L.current||!s.current)&&!ee.current){H.current(s.current);let $=g||c,E=y(s.current,t||r||"",n||p||"",$||"");a.current=s.current?.editor.create(L.current,{model:E,automaticLayout:!0,...w},D),M&&a.current.restoreViewState(_.get($)),s.current.editor.setTheme(b),R!==void 0&&a.current.revealLine(R),d(!0),ee.current=!0}},[r,n,c,t,p,g,w,D,M,b,R]);(0,e.useEffect)(()=>{o&&N.current(a.current,s.current)},[o]),(0,e.useEffect)(()=>{!i&&!o&&re()},[i,o,re]),u.current=t,(0,e.useEffect)(()=>{o&&C&&(T.current?.dispose(),T.current=a.current?.onDidChangeModelContent($=>{X.current||C(a.current.getValue(),$)}))},[o,C]),(0,e.useEffect)(()=>{if(o){let $=s.current.editor.onDidChangeMarkers(E=>{let A=a.current.getModel()?.uri;if(A&&E.find(B=>B.path===A.path)){let B=s.current.editor.getModelMarkers({resource:A});O?.(B)}});return()=>{$?.dispose()}}return()=>{}},[o,O]);function Ve(){T.current?.dispose(),j?M&&_.set(g,a.current.saveViewState()):a.current.getModel()?.dispose(),a.current.dispose()}return m(e).createElement(Q,{width:F,height:q,isEditorReady:o,loading:Z,_ref:L,className:z,wrapperProps:J})}var ye=xe,K=(0,e.memo)(ye),Le=K})})();
